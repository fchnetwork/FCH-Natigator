<aer-modal-container>
  <div class="swap-create">
    <h1>{{'EXTERNAL-SWAP.CREATE.TITLE'|translate}}</h1>
    <app-divider></app-divider>
    <div aerRow>
      <div aerColumn size="sm-12" class="cell">
        <label>{{'EXTERNAL-SWAP.CREATE.FIELD_RECEIVING_AERUM_TOKEN'|translate}}</label>
        <aer-select [(ngModel)]="selectedToken"dataKey="symbol" icon="aerumleaf" placeholder="{{'EXTERNAL-SWAP.CREATE.FIELD_SELECT_YOUR_TOKEN'|translate}}" (ngModelChange)="onTokenChange()" [disabled]="processing">
          <aer-select-option *ngFor="let token of tokens;" [value]="token">
            <aer-icon>aerumleaf</aer-icon>
            <span>{{token.symbol}}</span>
          </aer-select-option>
        </aer-select>
      </div>
    </div>
    <div aerRow>
      <div aerColumn size="sm-12" class="cell">
        <label>{{'EXTERNAL-SWAP.CREATE.FIELD_AMOUNT_OF_TOKEN_TO_RECEIVE'|translate}}</label>
        <aer-input [ngModel]="amount | number" placeholder="{{'EXTERNAL-SWAP.CREATE.FIELD_TYPE_AMOUNT'|translate}}" (ngModelChange)="onAmountChange($event)" [attr.readonly]="processing"></aer-input>
      </div>
    </div>
    <div aerRow>
      <div aerColumn size="sm-12" class="cell">
        <label>{{'EXTERNAL-SWAP.CREATE.FIELD_EXCHANGE_COUNTERPARTY'|translate}}</label>
        <aer-select [(ngModel)]="selectedTemplate" dataKey="onchainAccount" placeholder="{{'EXTERNAL-SWAP.CREATE.FIELD_SELECT_YOUR_COUNTERPARTY'|translate}}" (ngModelChange)="onTemplateChange()" [disabled]="processing">
          <aer-select-option *ngFor="let template of templates;" [value]="template">
            <img class="avatar" [src]="template.onchainAccount | generateavatar">
            <span>{{template.onchainAccount}}</span>
          </aer-select-option>
        </aer-select>
      </div>
    </div>
    <div class="table-simple">
      <div>
        <div>
          {{'EXTERNAL-SWAP.CREATE.FIELD_SEND_ETHEREUM_ASSET'|translate}}
        </div>
        <div>
          {{ walletTokenSymbol }}
        </div>
      </div>
      <div>
        <div>
          {{'EXTERNAL-SWAP.CREATE.FIELD_AMOUNT'|translate}}
        </div>
        <div>
          {{tokenAmount| number:'1.2-18'}}
        </div>
      </div>
      <div>
        <div>
          {{'EXTERNAL-SWAP.CREATE.FIELD_EXCHANGE_RATE'|translate}}
        </div>
        <div>
          {{rate | number:'1.2-18'}}
        </div>
      </div>
      <div>
        <div>
          {{'EXTERNAL-SWAP.CREATE.FIELD_SECRET_KEY'|translate}}
        </div>
        <div class="secret-key">
          <span (click)="copyToClipboard()">{{secret}}</span>
        </div>
      </div>
      <div *ngIf="approveTokenTransactionExplorerUrl || openSwapTransactionExplorerUrl">
        <div>
          <a *ngIf="approveTokenTransactionExplorerUrl" href="{{approveTokenTransactionExplorerUrl}}" target="_blank" class="c-swap-create__explorer-link">{{approveTokenTransactionExplorerUrl | truncate: 40}}</a>
          <a *ngIf="openSwapTransactionExplorerUrl" href="{{openSwapTransactionExplorerUrl}}" target="_blank" class="c-swap-create__explorer-link">{{openSwapTransactionExplorerUrl | truncate: 40}}</a>
        </div>
        <div>
          <img *ngIf="processing" src="assets/images/loading.svg" alt="loading"/>
        </div>
      </div>
    </div>
    <div class="message">
      {{'EXTERNAL-SWAP.CREATE.FIELD_MESSAGE'|translate}}
    </div>
    <aer-button (buttonFn)="next()" class="blue large full-width" [disabled]="!canMoveNext()" (ngClass)="{ 'blue': canMoveNext(), 'grey': !canMoveNext() }">{{'EXTERNAL-SWAP.CREATE.BTN_NEXT'|translate}}</aer-button>
    <aer-button (buttonFn)="cancel()" class="blue large full-width" [disabled]="processing" (ngClass)="{ 'blue': !processing, 'grey': processing }">{{(swapCreated ? 'EXTERNAL-SWAP.CREATE.BTN_CLOSE' : 'EXTERNAL-SWAP.CREATE.BTN_BACK') |translate}}</aer-button>
  </div>
</aer-modal-container>