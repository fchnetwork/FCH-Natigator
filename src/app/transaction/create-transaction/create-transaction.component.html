<div class="content">
  <div class="title">{{'SEND_TRANSACTION'|translate}}</div>
  <div class="row">
    <div class="col-sm-6">
      <div class="panel">
        <div class="panel-header">
          {{'SEND_TO'|translate}}
        </div>
        <div class="panel-content">
          <form [formGroup]="txnForm" >
            <div class="row">
              <div class="col-sm-6">
                <div class="input-name">{{'FROM'|translate}}</div>
                <aer-input icon="aerum" [ngClass]="{'has-error':!txnForm.controls['senderAddress'].valid && txnForm.controls['senderAddress'].touched}" formControlName="senderAddress" [(ngModel)]="senderAddress" ngDefaultControl (ngModelChange)="handleInputsChange()"></aer-input>
              </div>
              <div class="col-sm-6">
                <div class="input-name">{{'TO'|translate}}</div>
                <aer-input  [ngClass]="{'has-error':!txnForm.controls['receiverAddress'].valid && txnForm.controls['receiverAddress'].touched}" formControlName="receiverAddress" [(ngModel)]="receiverAddress" ngDefaultControl (ngModelChange)="handleInputsChange()"></aer-input>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-6">
                <div class="input-name">{{'AMOUNT'|translate}}</div>
                <aer-input [ngClass]="{'has-error':!txnForm.controls['amount'].valid && txnForm.controls['amount'].touched}" formControlName="amount" [(ngModel)]="amount" ngDefaultControl (ngModelChange)="handleInputsChange()"></aer-input>
                <input id="sendEverything" type="checkbox" [ngModelOptions]="{standalone: true}" [ngModel]="sendEverything" (ngModelChange)="setSendEverything($event); handleInputsChange()"><label for="sendEverything"> {{'SEND_EVERYTHING'|translate}} ({{walletBalance}} {{selectedToken.symbol}})</label>
              </div>
              <div class="col-sm-6 tokensSelect">
                    <aer-select formControlName="selectedToken" [(ngModel)]="selectedToken" (ngModelChange)="handleSelectChange()" dataKey="symbol" icon="aerum" placeholder="Select your token">
                        <aer-select-option [value]="{symbol: 'AERO'}">AERO</aer-select-option>
                        <aer-select-option *ngFor="let item of tokens;" [value]="item">{{item.symbol}}</aer-select-option>
                    </aer-select>
                    <div class="account-status-line">
                        <aer-icon>aerum</aer-icon>
                        <div class="float-left">{{walletBalance}} {{selectedToken.symbol}}</div>
                    </div>
              </div>
          </div>

          <span *ngIf="txnForm.controls['senderAddress'].hasError('required') && txnForm.controls['senderAddress'].touched" class="login-error">You must include a sender address.</span>
          <span *ngIf="txnForm.controls['senderAddress'].hasError('minlength') && txnForm.controls['senderAddress'].touched" class="login-error">Your sender address must be at least 42 characters in length and be prefixed with '0x'.</span>
          <span *ngIf="txnForm.controls['senderAddress'].hasError('maxlength') && txnForm.controls['senderAddress'].touched" class="login-error">Your sender address cannot exceed 42 characters in length and be prefixed with '0x'.</span>
          <span *ngIf="txnForm.controls['senderAddress'].hasError('pattern') && txnForm.controls['senderAddress'].touched" class="login-error">sender address needs to be a hex string</span>

          <span *ngIf="txnForm.controls['receiverAddress'].hasError('required') && txnForm.controls['receiverAddress'].touched" class="login-error">You must include a receiverAddress.</span>
          <span *ngIf="txnForm.controls['receiverAddress'].hasError('minlength') && txnForm.controls['receiverAddress'].touched" class="login-error">Your receiver address must be at least 42 characters in length and be prefixed with '0x'.</span>
          <span *ngIf="txnForm.controls['receiverAddress'].hasError('maxlength') && txnForm.controls['receiverAddress'].touched" class="login-error">Your receiver address cannot exceed 42 characters in length and be prefixed with '0x'.</span>
          <span *ngIf="txnForm.controls['receiverAddress'].hasError('pattern') && txnForm.controls['senderAddress'].touched" class="login-error">receiver address needs to be a hex string</span>

          <span *ngIf="txnForm.controls['amount'].hasError('required') && txnForm.controls['amount'].touched" class="login-error">You must specify an amount for the transaction</span>
          <span *ngIf="txnForm.controls['amount'].hasError('pattern')" class="login-error">must be an integer or decimal.</span>

        </form>
        <div class="show-more-button">
              <div class="row">
                  <div class="col-sm-12">
                    <aer-button *ngIf="!showedMore" class="medium blue" (buttonFn)="showMore()">{{'SHOW_MORE_OPTIONS'|translate}}</aer-button>
                    <aer-button *ngIf="showedMore" class="medium blue" (buttonFn)="showMore()">Show less options</aer-button>
                  </div>
                </div>
          </div>
          <app-transaction-more-options *ngIf="showedMore" [data]="moreOptionsData" (ngModelChange)="moreOptionsChange($event)"></app-transaction-more-options>
          <div class="row">
            <div class="col-sm-4">
              <div class="note">{{'MAX_TRANSACTION_FEE'|translate}}</div>
            </div>
            <div class="col-sm-4">
              <div class="note">{{maxTransactionFee}} aergwei</div>
            </div>
            <div class="col-sm-4">
              <div class="note">{{'MAX_TRANS_FEE_WARNING'|translate}}</div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12">
              <div class="input-name">{{'TOTAL'|translate}}</div>
              <div *ngIf="selectedToken.symbol !== 'AERO'" class="amount-total">
                  {{amount}} {{selectedToken.symbol}}
              </div>
              <div *ngIf="selectedToken.symbol !== 'AERO'" class="input-name">Gas cost</div>
              <div class="amount-total">
                {{totalAmount}} AERO
              </div>
              <div class="note">
                  {{'DATA_INCLUDED'|translate}}: {{includedDataLength}} {{'BYTES'|translate}}
              </div>
              <hr>
              <div class="footer-buttons">
                  <aer-button class="normal blue" (buttonFn)="send()">{{'SEND'|translate}}</aer-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-6">
      <div class="panel min-width-470">
        <div class="panel-header">
            {{ 'RECEIVE_TO'|translate }}
        </div>
        <div class="panel-content">
            {{ transactionMessage }}
            <img [src]="addressQR" alt="">
            <div class="c-copy__address" >
              <a (click)="copyToClipboard()">{{ senderAddress }}</a>
            </div>
        </div>
      </div>
      <app-last-transactions></app-last-transactions>
    </div>
  </div>
</div>
